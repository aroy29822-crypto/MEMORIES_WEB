{% extends "base.html" %}
{% block body %}

<style>
    .memory-block {
        width: 100%;
        max-width: 1150px;
        margin: 0 auto 90px auto;
        color: rgb(255, 255, 255);
        font-size: 17px;
        line-height: 1.45;
        white-space: pre-line;
        opacity: 0;
        transform: translateY(40px) scale(.97);
        transition: all .5s;
    }

    .memory-block.show {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    .picture {
        width: 130px;
        height: 130px;
        object-fit: cover;
        border-radius: 9px;
        box-shadow: 0 0 22px rgba(0, 0, 0, .45);
        cursor: pointer;
        margin-bottom: 10px;
    }
</style>


<div class="container py-5" style="max-width:1250px;margin:auto;">

    {% if show_popup %}
    <div id="welcome-box">
        Hi {{ firstname }}!<br><small>{{ quote }}</small>
    </div>
    {% endif %}

    {% for p in docs %}

    <div class="memory-block" style="{% if loop.index0%2==0 %}float:left{% else %}float:right{% endif %};clear:both;">

        {% if 'mp4' in p.url or 'webm' in p.url or 'mov' in p.url %}
        <video class="picture"
            style="{% if loop.index0%2==0 %}float:left;margin-right:20px{% else %}float:right;margin-left:20px{% endif %}"
            data-full="{{ p.url }}" src="{{ p.url|replace('/upload/','/upload/w_350,h_350,c_fill/') }}" controls
            onclick="zoomMedia(this,true)" loading="lazy"></video>
        {% else %}
        <img class="picture"
            style="{% if loop.index0%2==0 %}float:left;margin-right:20px{% else %}float:right;margin-left:20px{% endif %}"
            data-full="{{ p.url }}" src="{{ p.url|replace('/upload/','/upload/w_350,h_350,c_fill/') }}"
            onclick="zoomMedia(this,false)" loading="lazy">
        {% endif %}

        {{ p.desc }}

        <div style="clear:both"></div>
    </div>

    {% endfor %}

    <div style="height:100px"></div>

</div>


<!-- your same zoom + feedback scripts stay same -->

<script>
    function reveal() {
        document.querySelectorAll(".memory-block").forEach(r => {
            if (r.getBoundingClientRect().top < window.innerHeight - 70) r.classList.add("show");
        })
    }
    window.addEventListener("scroll", reveal)
    window.addEventListener("load", reveal)
</script>

{% endblock %}