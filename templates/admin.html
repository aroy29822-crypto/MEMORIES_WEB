{% extends "base.html" %}
{% block body %}

<style>
    .admin-panel {
        max-width: 1100px;
        margin: 60px auto;
        color: white;
        animation: slideInFromLeft 0.9s ease forwards;
        transform: translateX(-50px);
        opacity: 0;
    }

    @keyframes slideInFromLeft {
        from {
            opacity: 0;
            transform: translateX(-70px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    .admin-header {
        text-align: center;
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 40px;
        color: #ffeecf;
        animation: fadeDown 0.7s ease forwards;
    }

    @keyframes fadeDown {
        from {
            opacity: 0;
            transform: translateY(-20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .admin-card {
        background: rgba(0, 0, 0, 0.55);
        backdrop-filter: blur(10px);
        border-radius: 14px;
        padding: 20px;
        margin-bottom: 25px;
        box-shadow: 0 0 18px rgba(0, 0, 0, 0.35);
        transition: 0.3s;
    }

    .admin-card:hover {
        box-shadow: 0 0 25px rgba(255, 210, 127, 0.3);
        transform: translateY(-4px);
    }

    .admin-card img,
    .admin-card video {
        width: 180px;
        height: 180px;
        border-radius: 10px;
        object-fit: cover;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
        cursor: pointer;
        margin-bottom: 10px;
    }

    .admin-card b {
        color: #ffd27f;
    }

    .btn-danger {
        background: #ff6666;
        border: none;
        transition: 0.3s;
    }

    .btn-danger:hover {
        background: #ff4444;
    }

    .btn-warning {
        background: #ffd27f;
        color: black;
        border: none;
        transition: 0.3s;
    }

    .btn-warning:hover {
        background: #ffcc66;
    }

    @media(max-width:700px) {

        .admin-card img,
        .admin-card video {
            width: 100%;
            height: auto;
        }
    }
</style>

<div class="admin-panel">
    <div class="admin-header">Admin Panel â€” All Uploaded Posts</div>

    {% for p in docs %}
    <div class="admin-card">
        {% if 'mp4' in p.url or 'webm' in p.url %}
        <video src="{{ p.url }}" controls></video>
        {% else %}
        <img src="{{ p.url }}" alt="post">
        {% endif %}

        <p><b>Place:</b> {{ p.place or "Unknown" }}</p>
        <p><b>Date:</b> {{ p.date or "N/A" }}</p>
        <p>{{ p.desc }}</p>

        <div class="d-flex gap-2 mt-2">
            <a href="{{ url_for('edit_post', id=p._id) }}" class="btn btn-warning btn-sm">Edit</a>
            <form action="{{ url_for('delete_post', id=p._id) }}" method="POST"
                onsubmit="return confirm('Delete this post permanently?')">
                <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>

{% endblock %}